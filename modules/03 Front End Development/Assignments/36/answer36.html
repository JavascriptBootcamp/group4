<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic-Tac-Toe game</title>
</head>

<body>
    <div id="header" align="center">
        <form id="pNames" onsubmit="return false">
            <div id="names">
                <h1> Welcome to Tic-Tac-Toe game</h1><br><br>
                <label for="firstPlayer">first player's name (X):</label>
                <input type="text" id="firstPlayer" placeholder=" enter first Player's name"><br><br>

                <label for="secondPlayer">second player's name (O):</label>
                <input type="text" id="secondPlayer" placeholder=" enter second Player's name">
                <input type="submit" value="Play" name="submit" onclick="initBoard()"><br>
                <br>
            </div>
            <br><br>
            <div id="turn"></div><br><br><br>

    </div>
    <div id="content">
        <table border="2">
            <tr>
                <td><button id="0_0" onclick="selectCell('0_0')"></button></td>
                <td><button id="0_1" onclick="selectCell('0_1')"></button></td>
                <td><button id="0_2" onclick="selectCell('0_2')"></button></td>
            </tr>
            <tr>
                <td><button id="1_0" onclick="selectCell('1_0')"></button></td>
                <td><button id="1_1" onclick="selectCell('1_1')"></button></td>
                <td><button id="1_2" onclick="selectCell('1_2')"></button></td>
            </tr>
            <tr>
                <td><button id="2_0" onclick="selectCell('2_0')"></button></td>
                <td><button id="2_1" onclick="selectCell('2_1')"></button></td>
                <td><button id="2_2" onclick="selectCell('2_2')"></button></td>
            </tr>
        </table>
    </div>

    <div id="footer"></div>
    </form>
    <script>
        var turn = 0;
        var isWin = 0;
        var needReset=0;
        var board = [];
        var dTurn;
        var p1Name,p2Name;


        function initBoard() {
            alert("initBoard started");
            p1Name=document.getElementById("firstPlayer").value;
            p2Name=document.getElementById("secondPlayer").value;
           
            board = new Array(3);
            for (let i = 0; i < board.length; i++) {
                board[i] = new Array(3);
            }
            for (let j = 0; j < board.length; j++) {
                board[j].fill(null);
            }

            turn = 1;
            dTurn = document.getElementById("turn");
            var message = document.createElement("h2");
            message.innerText = p1Name + " is your turn";
            
            dTurn.appendChild(message);

            document.getElementById("names").style.display = "none";
            document.getElementsByName("submit").disable = true;
        }
        function selectCell(c) {
            var x_y = c.split("_");
            var x = Number(x_y[0]);
            var y = Number(x_y[1]);
            if (turn === 1) //player1
            {
                board[x][y] = 1;//marked with 1 
                document.getElementById(c).innerHTML = "X";
                document.getElementById(c).disable = true;
                dTurn.innerText = p2Name + " is your turn";
                turn = 2;
                iswin = checkWin();
            }
            else if (turn === 2) {
                board[x][y] = 0;
                document.getElementById(c).innerHTML = "O";
                document.getElementById(c).disable = true;
                dTurn.innerText =p1Name + " is your turn";
                turn = 1;
                iswin = checkWin();
            }
            if (iswin === 1) {
                document.getElementById("footer").innerText = document.getElementById("firstPlayer").value + " WINS!!"
                needReset=turn;
            }
            else if (iswin === 2)
                {document.getElementById("footer").innerText = document.getElementById("secondPlayer").value + " WINS!!"
              needReset=true;}
              if(needReset)
              {document.getElementById("content").style.display="none";}


        }




        function checkWin() 
        {
            var x, y;
            var row_win_pl1 = true;
            var col_win_pl1 = true;
            var diag_win_pl1 = true;
            var cross_win_pl1 = true;
            var row_win_pl2 = true;
            var col_win_pl2 = true;
            var diag_win_pl2 = true;
            var cross_win_pl2 = true;
            for (x = 0; x < board.length; x++) {
                for (y = 0; y < board.length; y++) {
                    // row for player 1
                    if (row_win_pl1 && board[x][y] === 1) {
                        row_win_pl1 = true;
                    }
                    else {
                        row_win_pl1 = false;
                    }
                    // row for player 2
                    if (row_win_pl2 && board[x][y] === 0) {
                        row_win_pl2 = true;
                    }
                    else {
                        row_win_pl2 = false;
                    }
                    // coloum
                    // col for player 1
                    if (col_win_pl1 && board[y][x] === 1) {
                        col_win_pl1 = true;
                    }
                    else {
                        col_win_pl1 = false;
                    }
                    // col for player 2
                    if (col_win_pl2 && board[y][x] === 0) {
                        col_win_pl2 = true;
                    }
                    else {
                        col_win_pl2 = false;
                    }
                }
                // diagonal
                if (diag_win_pl1 && board[x][x] === 1) {
                    diag_win_pl1 = true;
                }
                else {
                    diag_win_pl1 = false;
                }
                // row for player 2
                if (diag_win_pl2 && board[x][x] === 0) {
                    diag_win_pl2 = true;
                }
                else {
                    diag_win_pl2 = false;
                }
                // cross
                if (cross_win_pl1 && board[board.length - x - 1][x] === 1) {
                    cross_win_pl1 = true;
                }
                else {
                    cross_win_pl1 = false;
                }
                // row for player 2
                if (cross_win_pl2 && board[board.length - x - 1][x] === 0) {
                    cross_win_pl2 = true;
                }
                else {
                    cross_win_pl2 = false;
                }
                if (row_win_pl1 || col_win_pl1) {
                    return 1;
                } else {
                    if (row_win_pl2 || col_win_pl2) {
                        return 2;
                    }
                }
                row_win_pl1 = true;
                col_win_pl1 = true;
                row_win_pl2 = true;
                col_win_pl2 = true;
            }
            if (diag_win_pl1 || cross_win_pl1) {
                return 1;
            } else {
                if (diag_win_pl2 || cross_win_pl2) {
                    return 2;
                } else {
                    return 0;
                }
            }
        }

    </script>
</body>

</html>
