<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <h1>Tic-Tac-Toe</h1>
    <div id="won"></div>
    <input type="text" placeholder="Player 1 (X)"><br>
    <input Type="text" placeholder="Player 2 (O)"><br>
    <button onclick="startNewGame()">Start New Game</button><br>
    <table border="2">
        <tr>
            <td><button id="box0" onclick="insertValueToBoard(this.id)"><img width="100px" height="100px"/></button></td>
            <td><button id="box1" onclick="insertValueToBoard(this.id)"><img width="100px" height="100px"/></button></td>
            <td><button id="box2" onclick="insertValueToBoard(this.id)"><img width="100px" height="100px"/></button></td>
        </tr>
        <tr>
            <td><button id="box3" onclick="insertValueToBoard(this.id)"><img width="100px" height="100px"/></button></td>
            <td><button id="box4" onclick="insertValueToBoard(this.id)"><img width="100px" height="100px"/></button></td>
            <td><button id="box5" onclick="insertValueToBoard(this.id)"><img width="100px" height="100px"/></button></td>
        </tr>
        <tr>
            <td><button id="box6" onclick="insertValueToBoard(this.id)"><img width="100px" height="100px"/></button></td>
            <td><button id="box7" onclick="insertValueToBoard(this.id)"><img width="100px" height="100px"/></button></td>
            <td><button id="box8" onclick="insertValueToBoard(this.id)"><img width="100px" height="100px"/></button></td>
        </tr>
    </table>

    <script>
    var turn = true;
    var table=[];
    function startNewGame(){
    }
    function insertValueToBoard(ClickedElementId){
        //check if already pressed, check if already win, if not - enter X if counter is odd, O if even
        if(turn)
        {
            var indexOfId = ClickedElementId.replace('box','');
            var x = document.getElementById(ClickedElementId);
            var img = x.firstElementChild;
            table[indexOfId] = 1;
            x.removeAttribute("onclick");
            img.setAttribute("src","images/X.jpg");
            console.log(table);
            
            turn = false;
            hasWon(turn);
        }
        else
        {
            var indexOfId = ClickedElementId.replace('box','');
            var o = document.getElementById(ClickedElementId);
            var img = o.firstElementChild;
            table[indexOfId] = 0;
            o.removeAttribute("onclick");
            img.setAttribute("src","images/O.jpg");
            turn = true;
            console.log(table);
            hasWon(turn);
        }

    }
    function hasWon(){
        //check if some player is won, if some has won, disable all board and display h2 element above with the alert "player x won"
        if(checkPlayerOneStatus())
        {
            document.getElementById("won").innerHTML="<h2>Player 1 has won</h2>";
            //var tds = document.getElementsByTagName("td");
            // for(var i=0;i<3;i++)
            // {
            //     var buttons = tds[i].getElementsByTagName("button")
            //     for(var j=0;j<3;j++)
            //     {
            //         console.log(buttons[i]);
            //         buttons[i].removeAttribute("onclick");
            //     }
            // }
        }
        if(checkPlayerTwoStatus())
        {
            document.getElementById("won").innerHTML="<h2>Player 2 has won</h2>";
        }
    }
    function checkPlayerOneStatus(){
        return ((table[0]+table[1]+table[2]===3)||(table[3]+table[4]+table[5]===3)||(table[6]+table[7]+table[8]===3)||(table[0]+table[3]+table[6]===3)||(table[1]+table[4]+table[7]===3)||(table[2]+table[5]+table[8]===3)||(table[0]+table[4]+table[8]===3)||(table[2]+table[4]+table[6]===3))
    }
    function checkPlayerTwoStatus(){
        return ((table[0]+table[1]+table[2]===0)||(table[3]+table[4]+table[5]===0)||(table[6]+table[7]+table[8]===0)||(table[0]+table[3]+table[6]===0)||(table[1]+table[4]+table[7]===0)||(table[2]+table[5]+table[8]===0)||(table[0]+table[4]+table[8]===0)||(table[2]+table[4]+table[6]===0))
    }

    </script>
</body>
</html>