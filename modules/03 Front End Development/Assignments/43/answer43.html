<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <h2>choose difficulty level</h2>
    <select id="level">
        <option>easy</option>
        <option>medium</option>
        <option>hard</option>
    </select>
    <select id="values">
    </select>
    <button onclick="startGame()">Go</button>
    <div id="result"></div>
    <script>
         var len;
         var level = document.getElementById("level");
         var selectDifficult = level.options.selectedIndex;
         var randomWord = "";
         function startGame(){
            len = 0;
            var values = document.getElementById("values");
            var result = document.getElementById("result");
            result.innerText = "";
            values.innerText = "";
            
        
            var word = getLevel();
            console.log(word);

            (function drawSelect(){
                var op = document.createElement("option");
                var arr = [];
                var win = false;
                for(var i=0; i<randomWord.length; i++)
                {
                    arr.push(randomWord[i]);
                }
                op.innerText = "";
                values.appendChild(op);
                arr = arr.sort();
                arr.forEach(function(item,index){
                    var option = document.createElement("option");
                    option.innerText = item;
                    values.appendChild(option);
                });
                for(var i=0; i<values.length; i++)
                {
                    values.onchange  = function(e){
                        var letter = e.target.selectedOptions[0].innerText;
                        var res = checkLetter(letter,randomWord);
                        if(res && len<arr.length  && !win)
                        {
                            if(len === arr.length-1)
                            {
                                win = true;
                            }
                            result.innerText+=letter;
                        }
                        else if(len === arr.length && win)
                        {
                            result.innerText = "you win";
                            nextLevel();
                        }
                        else if(len === arr.length && !win || !res)
                        {
                            result.innerText = "game over";
                        }
                    }
                }
            })();
            
        }
        function getLevel(){
            var word1 = new RandomWord(['a', 'k', 'r']);
            var word2 = new RandomWord(['a', 'b', 'c','t','z']);
            var word3 = new RandomWord(['a', 'b', 'c','d','e','f','g']);
            if(selectDifficult === 0)
            {
                return randomWord = word1.randomize(3);
            }
            else if(selectDifficult === 1)
            {
                return randomWord = word2.randomize(5);
            }
            else{
                return randomWord = word3.randomize(7);
            }
        }
        function checkLetter(letter,randomWord){
            if(letter !== randomWord[len])
            {
                return false;
            }
            else{
                len++;
                return true;
            }
        }
        function RandomWord(charsArray) {
            if (typeof charsArray === 'object') {
                //this.result = randomize(charsArray); 
            }
            else {
                console.log('"chars" should be an array.');
            }
            this.randomize = function (length) {
                if (typeof length === 'number') {
                    var text = "";
                    var possible = charsArray.join("");
                    for (var i = 0; i < length; i++)
                        text += possible.charAt(Math.floor(Math.random() * possible.length));
                    return text;
                }
                else {
                    console.log('"length" should be a number.');
                }
            }
        }
    </script>
</body>

</html>