<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <h1>Guess The Random Word</h1>

    Please choose difficulty level:<br><br>
    <div id="difficulty_level">
        <button id="Easy" onclick="randomize(3)">Easy</button>
        <button id="Medium" onclick="randomize(5)">Medium</button>
        <button id="Hard" onclick="randomize(7)">Hard</button><br><br>
    </div>

    <form>
        <select id="mySelect" onchange="checkWinFunction()">
            <option disabled selected value> -- select an option -- </option>
        </select>
    </form>
    <br>

    <p id="user_choice"></p>

    <button id="reset" onclick="randomize()">Retry!</button>

    <script>
        var easyWordsArray = ['aid', 'fly', 'hat', 'fog', 'gym'];
        var mediumWordsArray = ['abear', 'abort', 'after', 'gourd', 'pills'];
        var hardWordsArray = ['abalone', 'abaxial', 'gearbox', 'onboard', 'trellis'];

        var randomString = "";
        var alphabetRandomString = "";

        // document.getElementById("mySelect").addEventListener("change", myFunction);

        function randomize(wordLength) {
            var selectbox = document.getElementById('mySelect');
            resetGame(selectbox);
            randomString = createRandomString(wordLength);
            createSelectOptions(randomString, wordLength);
        
        }

        function createRandomString(length) {
            if (length === 3) {
                return easyWordsArray[Math.floor(Math.random() * easyWordsArray.length)];
            }
            else if (length === 5) {
                return mediumWordsArray[Math.floor(Math.random() * mediumWordsArray.length)];
            }
            else if (length === 7) {
                return hardWordsArray[Math.floor(Math.random() * hardWordsArray.length)];
            }
        }

        function createSelectOptions(randomString, wordLength) {

            var alphabetRandomString = randomString.split('').sort();
            for (var i = 0; i < wordLength; i++) {
                var opt = document.createElement('option');
                opt.id = i;
                opt.innerText = alphabetRandomString[i];
                document.getElementById('mySelect').appendChild(opt);
            }
        }

        function resetGame(selectbox) {
            for (i = selectbox.options.length - 1; i >= 1; i--) {
                selectbox.remove(i);
            }
            document.getElementById("mySelect").selectedIndex = 0;
            document.getElementById("user_choice").innerHTML = "";
            document.getElementById("mySelect").disabled = false;
        }

        function checkWinFunction() {
            var x = document.getElementById("mySelect").value;
            var userGuess = document.getElementById("user_choice").innerHTML += x;

            if(userGuess.length > (document.getElementById("mySelect").options.length - 1)){
                document.getElementById("user_choice").innerHTML = "YOU NEVER WIN!!!";
            }

            else if(document.getElementById("user_choice").innerText === randomString){
                document.getElementById("user_choice").innerHTML = "WINNER!!!";
                document.getElementById("mySelect").disabled = true;
            }
        }

        // function myFunction(){ //event listener
        //     var x = document.getElementById("mySelect").value;
        //     document.getElementById("user_choice").innerHTML += x;
        // }
    </script>
</body>

</html>