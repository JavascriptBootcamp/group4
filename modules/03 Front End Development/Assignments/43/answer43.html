<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>The Rnadom Word</title>
</head>

<body>
    <div id="header"></div>
    <div id="selectLevel">
        <select id="levelChoose">
            <option id="easy" selected>Easy</option>
            <option id="medium">Medium</option>
            <option id="hard">Hard</option>
        </select>

        <button id="startGame" onclick="startGame()">Start Game!</button>
    </div>
    <div id="selectedLetter"></div>
    <script>
        var letters = ['a', 'b', 'c','d', 'e', 'f','g', 'h', 'i','j', 'k', 'l','m', 'n', 'o','p', 'q', 'r','s', 't', 'u','v', 'w', 'x','y', 'z',];
        var wordLetters = [];
        var currentLetterP = 0;
        var theChosenLevel;
        var selectedWord = "";

        function startGame() {
            document.getElementById("selectLevel").style.visibility = 'hidden';
            var theChosenLevelElm = document.getElementById("levelChoose");
            theChosenLevel = theChosenLevelElm.options[theChosenLevelElm.selectedIndex].text;
            selectedWord = wordByLevel(theChosenLevel);
            wordHandler(selectedWord);

        }
        function wordHandler(selectedWord) {
            
            wordLetters = selectedWord.split("");
            temp = selectedWord.split("");
            var lettersToDisplay = temp.sort();
            displyLetters(lettersToDisplay);
        }
        function displyLetters(lettersToDisplay) {
            var d = document.getElementById("selectedLetter");


            // var newBtn=document.createElement("button");
            for (let i = 0; i < lettersToDisplay.length; i++) {
                var newBtn = document.createElement("button");
                newBtn.innerText = lettersToDisplay[i];
                newBtn.id = i;

                newBtn.onclick = function () {


                    if (wordLetters[currentLetterP] === this.innerText) {
                        currentLetterP++;
                        alert("right");
                        this.parentNode.removeChild(this);
                        if (currentLetterP === wordLetters.length) {
                            alert("you win this round!");
                            moveLevel(wordLetters.length, "up");
                            return;
                        }
                    }
                    else {
                        alert("you lost this round!");

                        moveLevel(wordLetters.length, "down");

                    }
                }
                d.appendChild(newBtn);
            }

        }
        function restartGame() {
            location.reload();
            return false;
        }
        function moveLevel(length, direction) {
            var head=document.getElementById("header");
            var startOverBtn;

            if(head.innerHTML!=null)
            {
                head.innerHTML=null;
            }
            var d = document.getElementById("selectedLetter");
            var displayMessage = document.createElement("h2");
            d.innerHTML = null;

            if (length === 7 && direction === "up") {
                ("you win The Rando Game, start over");
                displayMessage.innerText = "you win The Rando Game, start over";
                head.appendChild(displayMessage);
                startOverBtn=document.createElement("button");
                startOverBtn.innerText="Start Over";
                startOverBtn.onclick=function(){
                    restartGame();
                }
                head.appendChild(startOverBtn);
                return;
            }
            else if (length === 3 && direction === "down") {
                ("you lost The Rando Game, start over");
                displayMessage.innerText = "you lost The Rando Game, start over!!";
                head.appendChild(displayMessage);
                startOverBtn=document.createElement("button");
                startOverBtn.innerText="Start Over";
                startOverBtn.onclick=function(){
                    restartGame();
                }
                head.appendChild(startOverBtn);
                return false;
            }
            else if ((length === 3 || length === 5) && direction === "up") {
                length += 2;
                displayMessage.innerText = "Level:" + levelWordL(length);
                head.appendChild(displayMessage);
            }
            else if ((length === 5 || length === 7) && direction === "down") {
                length -= 2;
                displayMessage.innerText = "Level:" + levelWordL(length);
                head.appendChild(displayMessage);

            }
            selectedWord = (new RandomWord(letters, length)).text;
            wordHandler(selectedWord);
            
            
            currentLetterP = 0;
        }
        function wordByLevel(level) {
            var wordS = null;
            if (level === "Easy") {
                wordS = new RandomWord(letters, 3);

            }

            if (level === "Medium") {
                wordS = new RandomWord(letters, 5);

            }
            if (level === "Hard") {
                wordS = new RandomWord(letters, 7);

            }
            selectedWord = wordS.text;
            return selectedWord;
        }

        function levelWordL(length) {

            if (length === 3) {
                return "Easy";

            }
            if (length === 5) {
                return "Medium";

            }

            if (length === 7) {
                return "Hard";

            }
        }
        function RandomWord(charsArray, length) {
            if (typeof charsArray === 'object') {
                this.text = randomize(length);

            }
            else {
                console.log('"chars" should be an array.');
            }

        }
        this.randomize = function (length) {
            if (typeof length === 'number') {
                var text = "";
                var possible = letters.join("");
                for (var i = 0; i < length; i++)
                    text += possible.charAt(Math.floor(Math.random() * possible.length));
                return text;
            }
            else {
                console.log('"length" should be a number.');
            }
        }

    </script>
</body>

</html>
