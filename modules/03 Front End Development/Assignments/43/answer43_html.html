<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Guess The Random Word</title>

</head>

<style>
    #listWord span {
   margin:2px;
   padding: 5px;
   font-size:20px;
   background-color: blue;
   color:white;  
}
</style>

<body>
    <h3>Guess The Random Word</h3>
    <span></span> Chooses a difficulty level: </span> <br />
    <label for="easy">Easy : </label>
    <input type="radio" name="difficulty" id="easy" checked onclick="difficultyChoice()"><br />
    <label for="medium">Medium :</label>
    <input type="radio" name="difficulty" id="medium" onclick="difficultyChoice()"><br />
    <label for="hard">Hard : </label>
    <input type="radio" name="difficulty" id="hard" onclick="difficultyChoice()"><br />
    <input type="button" value="Start Game " onclick="showListWord()"><br />

    <div id="listWord"> </div>

    <h3 id="listGuest"></h3>
    <div id="msg"></div>

    <script>

        var RandomWord = function (chars) {

            this.randomize = function (length) {

                var errors = [];
                if (!Array.isArray(chars))
                    errors.push('"chars" should be an array');

                if (isNaN(length))
                    errors.push('length" should be a number');

                if ((Array.isArray(chars))) {
                    var isString = chars.some(function (val) {
                        return ((typeof val) == String);
                    })

                    if (isString)
                        errors.push(' "chars" should include only strings.')

                }

                if (errors.length > 0)
                    return console.error(errors);

                var randomString = "";

                for (var i = 0; i < length; i++) {

                    var index = Math.floor((Math.random() * chars.length));
                    randomString += chars[index];
                    chars.splice(index, 1);
                }

                return randomString;

            }
        }

        var fristGame = true;
        var numGess = 0;
        var listOfWord = ["ran", "group", "terminal"];



        function difficultyChoice() {
            var difficultyLevel = document.querySelector("input:checked");
            if (difficultyLevel.id == "easy")
                numGess = 0;
            if (difficultyLevel.id == "medium")
                numGess = 1;
            if (difficultyLevel.id == "hard")
                numGess = 2;
        }

        function showListWord() {

            var guess = true;
            var msg = document.querySelector("#msg");
            var listWord = document.querySelector("#listWord");
            var listGuest = document.querySelector("#listGuest");

            listGuest.innerHTML = "";


            msg.innerHTML = "";
            listWord.innerHTML = "";

            if (numGess > listOfWord.length - 1)
                difficultyChoice();

            var str = listOfWord[numGess];


            var arrStr1 = str.split("");
            var arrStr2 = str.split("");

            var word = new RandomWord(arrStr1);
            var randW = word.randomize(str.length);

            arrW = randW.split("").sort();

            for (var i = 0; i < arrW.length; i++)
                listWord.innerHTML += `<span>  ${arrW[i]} </span>`;
            listWord.innerHTML += "<br/>";

            var liElm = document.querySelectorAll("span");

            for (var i = 0; i < liElm.length; i++) {
                liElm[i].onclick = function (event) {

                    var letter = event.currentTarget.innerHTML;
                    listGuest.innerHTML += letter;

                    if (arrStr2.length > 0 && guess) {

                        if (letter.trim() === arrStr2[0].trim()) {
                            msg.innerHTML = "<mark>Good Guess</mark>";
                            arrStr2.splice(0, 1);

                            setTimeout(function () {
                                msg.innerHTML = "";
                            }, 1000);

                        }
                        else {

                            guess = false;
                            msg.innerHTML = "<mark>Bad Guess try Agein</mark>";
                            listWord.innerHTML = "";
                            arrStr2 = str.split("");
                            //showListWord();
                            return;
                        }
                    }

                    if (arrStr2.length == 0) {
                        listWord.innerHTML = "";
                        
                        msg.innerHTML = "<mark> GREAT : YOU Gess ALL</mark>";
                        numGess++;
                        if (numGess < listOfWord.length) {
                            // console.log( document.querySelectorAll("input"));
                            document.querySelectorAll("input[type=radio]")[numGess].checked = true;
                            showListWord();
                        }
                        else {
                            setTimeout(function () {
                                msg.innerHTML = "<mark> Game Over </mark>";
                            }, 2000);

                            setTimeout(function () {
                                listGuest.innerHTML = "";
                            }, 2000);

                        }


                    }

                }

            }

        }

    </script>
</body>

</html>