<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Answer 45</title>
</head>

<body>

    <form>
        Enter Image link:<input type="url" id="img"><br>
        Enter Wikipedia link:<input type="url" id="wiki"><br>
        <input type="button" value="Add" onclick="addToCollection(event)">
    </form>


    <!-- the div that holds the images  -->
    <div id="collection">

    </div>


    <!-- the div that holds the number  -->
    <div id="next">
        <!-- <a href="javascript:void(0)" onclick="Show(event)">1</a> -->
    </div>




    <script>
        var arrOfImages = [];
        var selectedPage = 1;
        var inputImage = document.getElementById("img");
        var inputWiki = document.getElementById("wiki");
        var imageDiv = document.getElementById("collection");
        var nextDiv = document.getElementById("next");
        var newNextElem;
        var newImageElem;
        var numOfPages = 0;


        function createImageElem() {
            var newImageElem;
            newImageElem = document.createElement("a");
            newImageElem.setAttribute("href", inputWiki.value);
            var imgChild = document.createElement("img");
            imgChild.setAttribute("src", inputImage.value);
            imgChild.setAttribute("height", "100");
            imgChild.setAttribute("width", "200");
            newImageElem.appendChild(imgChild);
            return newImageElem;
        }

        function cretaeNumElem() {
            newNextElem = document.createElement("a");
            newNextElem.setAttribute("href", "javascript:void(0)");
            newNextElem.setAttribute("onclick", "showImage(event)");
            newNextElem.innerText = numOfPages;
            return newNextElem;
        }

        function showImage(event) {
            // loads the right 12 images

            if (event.target.tagName == "INPUT") {     // Add was pressed
                
                if (selectedPage == numOfPages) {
                    if (arrOfImages.length % 13 !== 0) {
                        imageDiv.appendChild(arrOfImages[arrOfImages.length - 1]);
                    }
                }


            } else {    // page number was pressed - event.target.tagNmae === "A"

                if (selectedPage !== numOfPages) {
                    while (imageDiv.firstChild) {
                        imageDiv.removeChild(imageDiv.firstChild);
                    }

                    selectedPage = event.target.innerText;

                    var lastIndex = ((selectedPage * 12) - 1 < arrOfImages.length - 1) ? (selectedPage * 12) - 1 : arrOfImages.length -1;
                    for (var index = selectedPage * 12 - 12; index <= lastIndex; index++) {
                        imageDiv.appendChild(arrOfImages[index]);
                    }
                }
            }


        }


        function addToCollection(event) {
            // create an image element
            newImageElem = createImageElem();

            // add it to the array
            arrOfImages.push(newImageElem); // push the obj to arr


            // check if another number must be added
            if (arrOfImages.length % 13 === 0 || arrOfImages.length === 1) {
                numOfPages++;
                newNextElem = cretaeNumElem();
                nextDiv.appendChild(newNextElem);
                nextDiv.appendChild(document.createTextNode("  "));
            }

            showImage(event);
        }
    </script>


</body>

</html>
