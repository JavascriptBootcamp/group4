<html>

<head>
    <title>"Images | Favorites"</title>
</head>

<body onload="new Pages()">
    <form>
        <label for="imgSrc">Image Url: </label>
        <input type="url" name="imgSrc" id="imgSrc" size='100px' placeholder="https://upload.wikimedia.org/wikipedia/commons/b/be/KeizersgrachtReguliersgrachtAmsterdam.jpg">
        <br />
        <br />
        <label for="wiki">Wikipedia link: </label>
        <input type="url" name="wiki" id="wiki" size='50px' placeholder="https://en.wikipedia.org/wiki/Amsterdam">
        <button type='button' id='addImg'>Add the picture</button>
    </form>
    <hr />
    <div id="images">
        <a href="https://en.wikipedia.org/wiki/Amsterdam">
            <img src="https://upload.wikimedia.org/wikipedia/commons/b/be/KeizersgrachtReguliersgrachtAmsterdam.jpg"
                height="200" width="300" />
        </a>

        <a href="https://en.wikipedia.org/wiki/Moon">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/FullMoon2010.jpg/631px-FullMoon2010.jpg"
                height="200" width="220" />
        </a>

        <a href="https://en.wikipedia.org/wiki/Tel_Aviv">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8b/Tel_Aviv_Promenade_panoramics.jpg/800px-Tel_Aviv_Promenade_panoramics.jpg"
                height="200" width="300" />
        </a>

        <a href="https://en.wikipedia.org/wiki/Prague">
            <img src="https://www.prague.eu/img/pragueeu/u/property/logo-for-share-v2.jpg" height="200" width="300" />
        </a>

        <a href="https://en.wikipedia.org/wiki/Holon">
            <img src="https://www.israel21c.org/wp-content/uploads/2016/06/Photo-of-Beersheva-by-Leonard-ZhukovskyShutterstock.com_-1000x657.jpg"
                height="200" width="300" />
        </a>

        <a href="https://en.wikipedia.org/wiki/Amsterdam">
            <img src="https://upload.wikimedia.org/wikipedia/commons/b/be/KeizersgrachtReguliersgrachtAmsterdam.jpg"
                height="200" width="300" />
        </a>

        <a href="https://en.wikipedia.org/wiki/Amsterdam">
            <img src="https://upload.wikimedia.org/wikipedia/commons/b/be/KeizersgrachtReguliersgrachtAmsterdam.jpg"
                height="200" width="300" />
        </a>

        <a href="https://en.wikipedia.org/wiki/Amsterdam">
            <img src="https://upload.wikimedia.org/wikipedia/commons/b/be/KeizersgrachtReguliersgrachtAmsterdam.jpg"
                height="200" width="300" />
        </a>
    </div>

</body>
<script>
    function Pages() {
        const IMG_HEIGHT = '200px';
        const IMG_WIDTH = '300px';
        const AMOUNT = 12;
        var initPage = true;
        var currentPage = 1;
        var page = 1;
        var navbar;
        var allImages = [[]];
        var images12 = [];
        var div = document.querySelector('#images');
        var newImg = document.querySelector('#imgSrc');
        var newWiki = document.querySelector('#wiki');
        var addBtn = document.querySelector('#addImg');
        var myself = this;
        this.showPage = function showCurrPage(event) {
            var btn = event.target;
            var divNav = navbar.children[0];
            divNav.childNodes[currentPage - 1].disabled = false;
            currentPage = Number(btn.innerText);
            images12 = allImages[currentPage - 1];
            btn.disabled = true;
            showPictures();
        }
        this.enableBtn = () => {
            if (newImg.value !== '' && newWiki.value !== '') {
                addBtn.disabled = false;
            } else {
                addBtn.disabled = true;
            }
        }
        this.add = function addPic() {
            var newAnchor = makeImgInsideAnchor(newWiki.value, newImg.value);
            if (checkHasSpace()) {
                if (currentPage === page) {
                    div.appendChild(newAnchor);
                }
            } else {
                var pageBtn;
                if (initPage) {
                    navbar = addMenu();
                    document.body.appendChild(navbar);
                    pageBtn = navbar.children[0].childNodes[0];
                    // the context is on the clicked button
                    pageBtn.addEventListener('click', myself.showPage);
                    initPage = false;
                }
                pageBtn = addPage();
                // the context is on the clicked button
                pageBtn.addEventListener('click', myself.showPage);
                appendImages12AndReset();
            }
            allImages[page - 1].push(newAnchor);
        }
        this.load = (() => {
            var initImages = document.getElementsByTagName('a');
            for (var i = 0; i < initImages.length; i++) {
                images12.push(initImages[i]);
            }
            allImages[0] = images12;
            addBtn.onclick = this.add;
            addBtn.disabled = true;
            newImg.oninput = this.enableBtn;
            newWiki.oninput = this.enableBtn;
        })();
        function showPictures() {
            while (div.firstChild) {
                div.removeChild(div.firstChild);
            }
            for (var i = 0; i < images12.length; i++) {
                div.appendChild(images12[i]);
            }
        }
        function appendImages12AndReset() {
            images12 = [];
            allImages.push(images12);
        }
        function addPage() {
            var newPage = document.createElement('button');
            var divNav = navbar.children[0];
            newPage.innerText = ++page;
            divNav.appendChild(newPage);
            return newPage;
        }
        function addMenu() {
            var nav = document.createElement('nav');
            var divNav = document.createElement('div');
            var btn = document.createElement('button');
            nav.innerText = 'Pages: ';
            btn.innerText = '1';
            btn.disabled = true;
            divNav.appendChild(btn);
            nav.appendChild(divNav);
            return nav;
        }
        function makeImgInsideAnchor(theHref, theImgSrc) {
            var anchor = document.createElement('a');
            var img = document.createElement('img');
            anchor.setAttribute('href', theHref);
            img.setAttribute('src', theImgSrc);
            img.setAttribute('height', IMG_HEIGHT);
            img.setAttribute('width', IMG_WIDTH);
            anchor.appendChild(img);
            return anchor;
        }
        function checkHasSpace() {
            if (allImages[page -1].length < AMOUNT) {
                return true;
            }
            return false;
        }
    }
</script>

</html>