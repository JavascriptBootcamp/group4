<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <style>
        *{
            box-sizing: border-box;
        }
        body{
            background: rgb(203, 219, 229);
            padding: 0px;
            margin: 0px;
            filter: none;
            filter: blur(0);
        }
        #wrapper{
            display: flex;
            justify-content: flex-start;
            flex-wrap: wrap;
            width: 100%;
            margin-top: 30px;
            padding-left: 10px;
            padding-right: 10px;
        }
        .imageBox{
            position: relative;
            height: 110px;
            width: 110px;
            margin: 15px 10px;
            padding: 0px;
            flex-shrink: 0;
        }
        .imageBox:hover{
            box-shadow: 0px 0px 10px 0px #0D1114;
            border: 2px solid white;
            cursor: pointer;
        }
        .indicators{
            display: inline-block;
        }
        .img{
            display: block;
            position: absolute;
            top:0;
            left: 0;
            margin: 0;
            padding: 0;
            width: 100%;
            height: 76%;
        }
        .like-buttons{
            position: absolute;
            bottom:0;
            left: 0;
            width: 65%;
            border: none;
            padding: 0px;
            margin: 0px;
            background: #748A99;
            height: 24%;
            color: white;
            cursor: pointer;
        }
        .like-counters{
            position: absolute;
            border: none;
            bottom:0;
            right: 0;
            width: 35%;
            height: 24%;
            padding: 0;
            background: #0D1114;
            color: white;
            text-align: center;
        }
        header{
            width: 100%;
            background-color: #748A99;
            height: 30px;
        }
        .disaplayImg{
            position: absolute;
            height: 440px;
            width: 440px;
            top: 50vh;
            left: 50vw;
            margin-top: -220px;
            margin-left: -220px;
            z-index: 999;
            filter: none !important;
            text-align: center;
        }
        .disaplayImg:hover{
            cursor: default;
            border: none;
            box-shadow: none;
            filter: none;
        }
        #black-BG{
            background-color: black;
            opacity: 0.5;
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            width: 100%;
            height: 100vh;
            position:absolute;
            z-index:2;
            display: none;
        }
        .blur{
            filter: blur(4px);
        }
    </style>
    <title>Document</title>
</head>
<body>
    <div id="black-BG" onclick="cancelDisplay()"></div>
    <header></header>
    <div id="wrapper">
    </div>
    <script>
        var boxes = [];
        function ImgBox(src,id){
            this.likeCount = 0;
            this.src = src;
            this.id = id;
        }
        ImgBox.prototype.createNewElement=function(){
            var imgBoxHTML = document.createElement("div");
            imgBoxHTML.classList.add("imageBox");
            imgBoxHTML.setAttribute("onclick", "displayImg(this)");
            imgBoxHTML.innerHTML=`<img class="img" src="${this.src}"/>\
                                    <div class="indicators">\
                                    <button id="${this.id}" class="like-buttons" onclick="addLike(this.id);event.stopPropagation();">Like</button>\
                                    <input type="number" disabled class="like-counters" value="${this.likeCount}">\
                                    </div>`;
            var wrapper = document.getElementById("wrapper");
            wrapper.appendChild(imgBoxHTML);
        }
        ImgBox.prototype.renderValue=function(){
            var inputTag = document.getElementById(this.id).parentNode.lastElementChild;
            inputTag.value=this.likeCount;
        }
        ImgBox.prototype.addLike=function(){
            this.likeCount++;
        }
        function addLike(id){
            index=id.replace('imageBox','');
            ImgBox.prototype.addLike.call(boxes[index]);
            ImgBox.prototype.renderValue.call(boxes[index]);
            storeToLS();
        }
        function displayImg(someBox){
            var allBoxes = document.getElementsByClassName('imageBox');
            var blackBG = document.getElementById("black-BG");
            for(var i=0; i<allBoxes.length; i++){
                allBoxes[i].classList.add("blur");
            }
            blackBG.style.display = "block";
            someBox.classList.add("disaplayImg");
        }
        function cancelDisplay(){
            var allBoxes = document.getElementsByClassName('imageBox');
            var blackBG = document.getElementById("black-BG");
            for(var i=0; i<allBoxes.length; i++){
                allBoxes[i].classList.remove("blur");
                allBoxes[i].classList.remove("disaplayImg");
            }
            blackBG.style.display = "none";
        }
        function storeToLS(){
            localStorage.setItem("boxes",JSON.stringify(boxes));
        }
        function loadFromLS(){
            boxes[i].createNewElement();
        }
        if(localStorage.getItem("boxes")){
            var retrievedData=localStorage.getItem("boxes");
            boxes = JSON.parse(retrievedData);
            for(var i=0; i<11; i++){
                ImgBox.prototype.createNewElement.call(boxes[i]);
            }
        }
        else{
            for(var i=0; i<11; i++){
            boxes.push(new ImgBox("images/picture.png",`imageBox${i}`));
            boxes[i].createNewElement();
            }
        }
    </script>
</body>
</html>