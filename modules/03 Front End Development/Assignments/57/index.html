<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        img {
            height: 70px;
            width: 85px;
            display: block;
            margin-right: 30px;
            margin-top: 30px;
        }
        img:hover {
            box-shadow: 2px 2px 20px red;
}
        button {
            width: 60px;
            border-radius: 15%;
            display: inline-block;
            margin-bottom: 40px;
            background-color: cadetblue;
            color: white;
        }

        label {
            background-color: black;
            display: inline-flex;
            height: 20px;
            width: 25px;
            color: cadetblue;
        }
    </style>
</head>

<div style="display:flex;" class="wrapper">
    <div class="images">
    </div>
    <div class="images">

    </div>
    <div class="images">

    </div>

</div>
<div style="display:flex;" class="wrapper">
    <div class="images">
    </div>
    <div class="images">

    </div>
    <div class="images">

    </div>

</div>
<div style="display:flex;" class="wrapper">
    <div class="images">
    </div>
    <div class="images">

    </div>
    <div class="images">

    </div>


</div>

<body>
    <script>
        var imagesArr = [];
        let likeStorage =getLikesAmount();

        function Image(src, counter) {
            this._src = src;
            this._counter = counter;
            // this.getCounter = function () {
            //     return _counter;
            // }
            // this.getSrc = function () {
            //     return _src;
            // }
        }
        function Like(params) {
            console.log(params)
            imagesArr[params.target.id].like(params);


        }
        Image.prototype.like=function (params) {
            params.target.nextElementSibling.innerText=this._counter++;
            likeStorage[params.target.id]=this._counter;
            saveLocal(likeStorage) 
            console.log(getLikesAmount())
        }
        for (var index = 0; index < 9; index++) {
            console.log(index);

            var image = new Image("57.png", 0);
            imagesArr.push(image);
            var imageEl = document.createElement("img");
            imageEl.src = "57.png";
            document.getElementsByClassName("images")[index].appendChild(imageEl);
            var buttonLike = document.createElement("button");
            buttonLike.innerText = "LIKE";
            buttonLike.id = index;
            buttonLike.onclick = Like;
            var label = document.createElement("label");
            label.innerText = likeStorage[index] ? likeStorage[index] : 0;
            document.getElementsByClassName("images")[index].appendChild(buttonLike);
            document.getElementsByClassName("images")[index].appendChild(label);


        }
        function saveLocal(itemsArray) {
            localStorage.setItem('likes',  JSON.stringify(itemsArray));
        }
        function getLikesAmount() {
            return localStorage.getItem('likes') ? JSON.parse(localStorage.getItem('likes')) : [];
        }
        // localStorage.clear();
    </script>
</body>

</html>
